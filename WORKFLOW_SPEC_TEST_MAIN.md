# 仕様化テストメインワークフロー

## 概要
依存性注入リファクタリングの安全性を確保するための仕様化テスト作成ワークフロー

## 前提条件
- 依存性注入の分析が完了していること
- リファクタリング対象が特定されていること

## フェーズ
```mermaid
graph TD
    Start[開始]
    Plan[1. 仕様化テスト計画]
    Impl[2. 仕様化テスト実装]
    Exec[3. 仕様化テスト実行]
    Eval[4. 仕様化テスト評価]
    DI[依存性注入リファクタリング]
    End[終了]

    Start --> Plan
    Plan --> Impl
    Impl --> Exec
    Exec --> Eval
    Eval -->|OK| DI
    Eval -->|NG| Plan
```

## 1. 仕様化テスト計画フェーズ
- 目的：既存コードの動作を観察・記録し、テスト実装の計画を立てる
- サブワークフロー：
  1. 観察計画 (WORKFLOW_OBSERVATION_PLAN_DI.md)
  2. 動作記録 (WORKFLOW_BEHAVIOR_RECORDING_DI.md)
  3. テスト環境設計 (WORKFLOW_TEST_ENV_DESIGN_DI.md)
  4. テスト実装計画 (WORKFLOW_TEST_IMPL_PLAN_DI.md)

## 2. 仕様化テスト実装フェーズ
- 目的：計画に基づいて仕様化テストを実装する
- 入力：仕様化テスト計画の成果物
- 出力：仕様化テストコード

## 3. 仕様化テスト実行フェーズ
- 目的：実装したテストを実行し、既存の動作を正しく検証できることを確認
- 入力：仕様化テストコード
- 出力：テスト実行結果

## 4. 仕様化テスト評価フェーズ
- 目的：仕様化テストが十分な品質であることを確認
- 評価基準：
  - 既存の動作を正確に検証できているか
  - すべての観察対象をカバーしているか
  - テストの再現性は確保されているか

## 次のフェーズへ
- すべての評価基準を満たした場合、依存性注入リファクタリングフェーズへ移行
- 基準を満たさない場合、必要なフェーズに戻って改善
